{% from 'image-optimize/_includes/macros' import configWarning %}

{% import "_includes/forms" as forms %}

{% if craft.imageOptimize.craft31 %}
    <!-- imgixDomain -->
    {{ forms.autosuggestField({
        label: 'Imgix Source Domain',
        instructions: "The source domain to use for the Imgix transforms."|t('image-optimize'),
        suggestEnvVars: true,
        id: 'domain',
        name: 'domain',
        value: imageTransform.domain,
        warning: configWarning('imageTransformTypeSettings', 'image-optimize'),
    }) }}
    <!-- imgixApiKey -->
    {{ forms.autosuggestField({
        label: 'Imgix API Key',
        instructions: "The API key to use for the Imgix transforms (needed for auto-purging changed assets)."|t('image-optimize'),
        suggestEnvVars: true,
        id: 'apiKey',
        name: 'apiKey',
        value: imageTransform.apiKey,
        warning: configWarning('imageTransformTypeSettings', 'image-optimize'),
    }) }}
    <!-- imgixSecurityToken -->
    {{ forms.autosuggestField({
        label: 'Imgix Security Token',
        instructions: "The optional [security token](https://docs.imgix.com/setup/securing-images) used to sign image URLs from Imgix."|t('image-optimize'),
        suggestEnvVars: true,
        id: 'securityToken',
        name: 'securityToken',
        value: imageTransform.securityToken,
        warning: configWarning('imageTransformTypeSettings', 'image-optimize'),
    }) }}
{% else %}
    <!-- imgixDomain -->
    {{ forms.textField({
        label: 'Imgix Source Domain',
        instructions: "The source domain to use for the Imgix transforms."|t('image-optimize'),
        id: 'domain',
        name: 'domain',
        value: imageTransform.domain,
        warning: configWarning('imageTransformTypeSettings', 'image-optimize'),
    }) }}
    <!-- imgixApiKey -->
    {{ forms.textField({
        label: 'Imgix API Key',
        instructions: "The API key to use for the Imgix transforms (needed for auto-purging changed assets)."|t('image-optimize'),
        id: 'apiKey',
        name: 'apiKey',
        value: imageTransform.apiKey,
        warning: configWarning('imageTransformTypeSettings', 'image-optimize'),
    }) }}
    <!-- imgixSecurityToken -->
    {{ forms.textField({
        label: 'Imgix Security Token',
        instructions: "The optional [security token](https://docs.imgix.com/setup/securing-images) used to sign image URLs from Imgix."|t('image-optimize'),
        id: 'securityToken',
        name: 'securityToken',
        value: imageTransform.securityToken,
        warning: configWarning('imageTransformTypeSettings', 'image-optimize'),
    }) }}
{% endif %}
{{ forms.textField({
    label: 'Unsharp Mask (USM)',
    instructions: "The amount of sharpening that should be applied if an image is scaled down more than 50% via the [USM parameter](https://docs.imgix.com/apis/rendering/adjustment/usm)."|t('image-optimize'),
    id: 'unsharpMask',
    name: 'unsharpMask',
    value: imageTransform.unsharpMask,
    min: -100,
    max: 100,
    inputmode: 'numeric',
    size: 4,
    warning: configWarning('imageTransformTypeSettings', 'image-optimize'),
}) }}
